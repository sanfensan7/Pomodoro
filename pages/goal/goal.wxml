<view class="container">
  <view class="header">
    <text class="title">目标设置</text>
  </view>
  
  <view class="motivation-card">
    <view class="daily-quote" style="border-color: {{themeColor}}">
      <text class="quote-text">{{dailyQuote.text}}</text>
      <text class="quote-author">——{{dailyQuote.author}}</text>
    </view>
  </view>
  
  <view class="goal-section">
    <view class="section-title">本周目标</view>
    <view class="goal-card">
      <view class="goal-header">
        <view class="goal-title">专注时长目标</view>
        <view class="goal-edit" bindtap="editWeeklyGoal">
          <image src="/images/edit.png" mode="aspectFit"></image>
        </view>
      </view>
      <view class="goal-progress">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{weeklyProgress.percent}}%; background-color: {{themeColor}}"></view>
        </view>
        <view class="progress-text">
          <text>{{weeklyProgress.current}}小时</text>
          <text>{{weeklyProgress.target}}小时</text>
        </view>
      </view>
      <view class="goal-info">
        <text class="goal-message" style="color: {{themeColor}}">{{weeklyProgress.message}}</text>
      </view>
    </view>
  </view>
  
  <view class="goal-section">
    <view class="section-title">本月目标</view>
    <view class="goal-card">
      <view class="goal-header">
        <view class="goal-title">专注次数目标</view>
        <view class="goal-edit" bindtap="editMonthlyGoal">
          <image src="/images/edit.png" mode="aspectFit"></image>
        </view>
      </view>
      <view class="goal-progress">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{monthlyProgress.percent}}%; background-color: {{themeColor}}"></view>
        </view>
        <view class="progress-text">
          <text>{{monthlyProgress.current}}次</text>
          <text>{{monthlyProgress.target}}次</text>
        </view>
      </view>
      <view class="goal-info">
        <text class="goal-message" style="color: {{themeColor}}">{{monthlyProgress.message}}</text>
      </view>
    </view>
  </view>
  
  <!-- 编辑目标弹窗 -->
  <view class="edit-modal {{showEditModal ? 'show' : ''}}">
    <view class="modal-content">
      <view class="modal-header">
        <text>{{editingWeekly ? '编辑周目标' : '编辑月目标'}}</text>
        <view class="close-btn" bindtap="toggleEditModal">×</view>
      </view>
      <view class="modal-body">
        <view class="form-group">
          <text class="form-label">{{editingWeekly ? '每周专注时长 (小时)' : '每月专注次数'}}</text>
          <slider min="1" max="{{editingWeekly ? 30 : 100}}" value="{{editingGoalValue}}" bindchange="changeGoalValue" show-value />
        </view>
      </view>
      <view class="modal-footer">
        <button class="btn-cancel" bindtap="toggleEditModal">取消</button>
        <button class="btn-confirm" style="background-color: {{themeColor}}" bindtap="saveGoal">保存</button>
      </view>
    </view>
  </view>
  
  <!-- 遮罩层 -->
  <view class="mask" wx:if="{{showEditModal}}" bindtap="toggleEditModal"></view>
</view> 