const fs = wx.getFileSystemManager();

// 微信小程序内置图标的base64编码
const icons = {
  // 常规图标 - 灰色
  "icon_component": "iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAPKADAAQAAAABAAAAPAAAAACL3+lcAAADA0lEQVRoBe1awWoUQRCdTRZFiEZRQRFy0osXweNK8OBX5Cz+hYgH/yJfoeQgHsyKF8GLIIqKN7MxIRt3MlN27xTdO7szU91V3VVJw1B0pqtev/eq0t0iG43GD7gNAw3GsEbBaNhrNIx4UcEoGBWMeAEQP2JUMAoGXQA6/NdjvL29Rbfb/Q1/W63WX/iH/TebTfwxwKERvBfu7+/fgQK+2QnJ+XweZrNZmE6nYTQahfl8HobD4YdOp/PVFheQEH82Gp5MJk/G4/EbKLvVbre3gEG73d5dLpf7OiQVgEW82PjNE/l8Ph8Am6PR6Mh13e+e572uWMzpdPpyNBrtuK67QSfr9fqJZm+5e7HtUxS9aBfchCB0cDgcPnNdd6dqYRHIdDp9QCdxwx4c+l4H3ASvcrHtSxQnBUF1eb5/cHJycthoNM5qgF2JcHJyclitVs+p4fF4bO1mnVfdghVFofvfXGQMXavVdoIgeIPPjUbjS7PZPKPv6DutP2uYOdm2AvOPkhF4+f5n/DyZTF55nhfRb9VqlZyiizFrWL6VVGt4tVqRu/Qfvvfe932/Xq9fWAK7bv0r2SXyIQAaJm/TkjU8m80I6A02Pv/j+/4nTaDWsKHhBW4ywIpC29A2OQ6GNXmppRNrGBelCJtgI8xyIiR8GFglPOt/Z6PhIAioSfoPrrLjwWDwgcOJGzfjG5wWxjhKqJeXl3txkx4+f1cByEbD1OyQiCzE4+VhqyW+DgEK1xmcWC5YgTnTbWsNb29vU5MR4Rbl6urq7vX19cdFBUPjWzSc47VKl/7y1tba0m+iE53grIIxWk5rxifgPNZtcz1BI3zD/Ew4MdlwPSEBi5pwypPGEi1H+Smg8zSse7XMiSYT2uQxnpcLWdtxYiKEoVsXEQxBljKwOWFkiY2TRtYsJyRFaJi7UlIkxYmVJTjOABmAs4BDnZwRcwTmfLeeM/N8jBpGvAsKRsGFS0YQcXARRxSMghEvAOJHjApGwaALQIf/AXhVFSNOKm3BAAAAAElFTkSuQmCC",
  
  // 高亮图标 - 蓝色
  "icon_component_HL": "iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAPKADAAQAAAABAAAAPAAAAACL3+lcAAAERklEQVRoBe1aQWsTQRR+aRIrZWnRWrRIe7AggiCCHjz0UvASPPXuP/HkL/AH9CaCIOLBkyAUPakgVGvVShubpMk2u5NkZncn+2Z2dubtZGcheOhu9s2b733vzSbZDXmed4Djx3mGdX2sIl2Udo21fRnSnmHdIzlgvP2+8Q9eudvtBvXjHK47BDvL5/NqKyivdDodtYUWS8rrdrvu7u6uKy9Ho5HbrVQqblj5fP6HUtnzPOoKa5XLZXd/f9/Z3t52t7a2nI2NDfuJra0tZ3Nz09ne3naKxaI6RLFYDC/N6pPIJ6LJo6Mjp1gsBu8ZDAZ+uVxW+0F5yVUpVFgP7KAZOj4TJD+63W4uak+lULsb39QeR+N4nsMhaFGE0x8vwZEZMpVcOJvkKy+CnSo01PZGf2EUAhj+/mN2H97b2wNUjTAkxCQPnl0VTiMqSygYVOC9VyJQGocwWnF2FfZNOAOGQZAY2NnZIXD/dYvpLDGjF+JeUXLNWV0Vl4uUa9HI0EAceLAa/dHk43IxnVb7QoXG1AUYeWDnP354WVIipZU5jjwwFNKc1qKF9ZE2YIz2U3rRE7d1tVrtH0KNRqNgpkTW/8kX0tZqNXdlZcVL6r3TbJCmXNfYXOvRUBLsMB7aNz/UbrcLJgdM5RFWIrzWs9mc5GNEsNZaTrfXqJAFUhajmN9JMa7nhN9fkuSpv4NjJnG5yHRDT6PgzI/2u3KlSWpra6u9Uqn0GpPh8PakXC4/XVTtaLIX0iytRcbSjFhYRDnWBOGgKDGBcbKwHmWAHQ8DyZDhOLXDgjFgBEmMJRaUeRkY5xFc5EY56LHjJ9I52rNLMEqF2vl8vj8ej+/DgA8PD4PhAJoQxs5NuZ6E01p4n32k39/cD/rhg9Ar1Ov119oRvnQunXKxGIsgkpHlJsNWOeGMOQ/4x2xMSU4O+EQ4UgI8LI4JR8pLcW4tzMNa6FJaGPAQxkQ8wm0LdN0K+yucQB56k+FhOSrQdFpfyiOvDT4wv5mQE9e4VZ74kRtbBYxxYY5l4ITjRtdWJxXA2K0Lz8UJYDCHwGJcNHYSACODnJWzElxkUUyWZ0U3NN6hGRbTxkqeG1ckGK5nCPHQg8EaYIyOA2waMEdsW5XSvDCKgz0bT0u5GFb97Uf65OQE8ER/aASw1LKm6oZAHI/HE5WpnJxGC04GINXrFVMYppKlmPnlGPKWAHGtpzNLYJnG5iKABRsUiS+lEy4JnhMSAqaYTi0mTkqCbQogbSkMaVx4kmrGDcxF5iQBQ5xAZGhZkbYA5z3sFQBzWyK1sJwRPD7l8CQ7OGnkTGKMYLqjTVZeUU1YSE3kpTQfyQV7hmUMzZE2nOE8wzNkZ44M5xiWuphneEbWDDmc4fvG/wArzP7iPxJGrwAAAABJRU5ErkJggg==",
  
  // API图标 - 灰色
  "icon_API": "iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAPKADAAQAAAABAAAAPAAAAACL3+lcAAADyElEQVRoBe1aT2sTQRTfTdJC2qSpXlqklEJRLy0VPBnBixehIOJJr30C+xamfgVBvXnsB6gIQgUVEQsWKVoUiniq1n+1TdrE3WSzMzvJZmYz82Z3Z9I+GJo/Mzv7fu/3vpnd2TgrdFptWKCvBgzLTm2BtUXaMaKgpB0jvMgPPsdZoEXCFgi3Oe6FhRYJu0ZYQ1qDcJtzHGc7Ly03IJwX6RLH5YWwl/jdAtjb2wPXxgm0GF78TI2+vj5IJpNQKBTAZrNBPB4HOmjDBmEJO3Z3d2FxcRGWlpaAjrm5Obhy5QpcunQJgsGgVMhpMUn/EkYIY2Nj8PLlSxgfH4ezZ8/CzMwMnDt3Dr5//y4ZLX80jbCEYRibm5uQSCSgUCzC6uoq+Hw+KBQK5eOFQgE8Hk9F2eBwOCCXy0EmkwFKOh6Pg91uB5fLBUNDQ6UYl8tVIe1KQS0nmolwxeX29/chFApBMBiEbDZbIuzxeiHg94PL6QS3210aHrcbnA4H2Gw28Pl85KwL+/m8SBrC4TDQPuTl5ORkQkuPJTWVSvnT6fS18vHV1dWlaDRaALHMzs4mY7FYcWNjI7iwsDD8/v37s/l8PnP8+PEjXq/3WiQSOZjJZL69ffu2uLW1Zd/e3nbOz89HPR7PmWPHjtmi0ejoxMTEj0+fPrn39vbOxOPxD0eOHPmu2jdVwtlsNnrnzp1PpQ5GIhP37t3703mWMbY0PDwsEY7FYmkWQ4+R0NLS0kQ6nQ7I5DKZjH9tba1wLx6/V41VJZxKpWbFjqyvr0/JxIx4TKzL4zlV0lc1Zu/evZuQK0Sj0amHDx9KIwpvbm5eunLlirz5oYDIiykTFgVFVUXCapQ2Nzf97969O8Rit7a2gnNzc3+lUqnfL168ONLZ2clizfrUJPzhw4fxZDJ5g9YjGo9YLL6+fv36jyMDA7S0cJ3VkUgkPj99+vSXFvuqBLLAWr/YQRrn7du3f7NYXatE+OzZs+zRZiHCLS0tsQFnEWYRVQkPDg5maZXF1mP2/evXrx1Ll96DvX/+/HlS1KFcqarCiUQCSqUSFItFSKVSkkbxPavX0dEB9+/fl0KvXLkCDx48gIcPH0nny+USuTQCUYUJb9xsQFLpdBr6+/slwpQ0KUnJsZIU7fP5fLSnD7Va2mZsbAzu3r0LtEdfvnwZaJ3a29vpeaqFXfpC6yft29nZKR00cmnpiqPD7XZDKBQCh8PR9OGshP838q2wlEW4FdaaTt0KSxbClmFWWCaW0haZLCnp0qkto7QI00JktLIWaaMt1urTpkhvAc3/BzA0JTfbqbxnAAAAAElFTkSuQmCC",
  
  // API图标 - 蓝色
  "icon_API_HL": "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"
};

// 创建图标文件
function createIcons() {
  // 确保images目录存在
  try {
    fs.accessSync('images');
  } catch (e) {
    try {
      fs.mkdirSync('images', true);
    } catch (mkdirErr) {
      console.error('创建images目录失败:', mkdirErr);
    }
  }
  
  // 生成图标文件
  let successCount = 0;
  
  for (let icon in icons) {
    try {
      // 写入文件
      fs.writeFileSync(
        `images/${icon}.png`, 
        icons[icon],
        'base64'
      );
      console.log(`${icon}.png 创建成功`);
      successCount++;
    } catch (e) {
      console.error(`创建 ${icon}.png 时出错:`, e);
      try {
        // 尝试写入用户目录
        const tempFilePath = `${wx.env.USER_DATA_PATH}/${icon}.png`;
        fs.writeFileSync(tempFilePath, icons[icon], 'base64');
        fs.copyFileSync(tempFilePath, `images/${icon}.png`);
        console.log(`${icon}.png 通过临时文件创建成功`);
        successCount++;
      } catch (e2) {
        console.error(`通过临时文件创建 ${icon}.png 失败:`, e2);
      }
    }
  }
  
  return successCount;
}

module.exports = {
  createIcons
}; 